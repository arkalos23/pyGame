import {
  CodeSurfer,
  CodeSurferColumns,
  Step,
} from "code-surfer";
import { github, nightOwl } from "@code-surfer/themes";
import "prismjs/components/prism-smalltalk"

export const theme = nightOwl;

# Python: pyGame

---

<CodeSurferColumns themes={[github, nightOwl]}>

<step>

```md
Ξεκινάμε από τα βασικά:

* Βιβλιοθήκες
* Αριθμός FPS
* Μέγεθος παραθύρου
* Δημιουργία νέου παραθύρου
* Προσθήκη ετικέτας "Space Invaders"
* Φόρτωση εικόνων (sprites)
* Κάνουμε initialize το font της pygame
```

```py
import pygame as pg
import random


FPS = 60



WIDTH, HEIGHT = 1000, 750
WINDOW = pg.display.set_mode((WIDTH, HEIGHT))
pg.display.set_caption("Space Invaders")


# load images
SPACESHIP_IMG = pg.image.load("assets/spaceship_32.png")
ALIEN_IMG = pg.image.load("assets/alien_green_32x23.png")
LASER_BULET = pg.image.load("assets/lazer_bullet.png")
BIG_ALIEN_IMG = pg.image.load("assets/big_alien.png")
POWER_UP_IMG = pg.image.load("assets/power_up.png")



pg.font.init()
```
</step>

</CodeSurferColumns>

---

<CodeSurferColumns themes={[github, nightOwl]}>

<step>

```md
* Mέσα στην main 
δημιουργούμε μια συνάρτηση 
για την ενημέρωση τον γραφικών.

* Αυτή η συνάρτηση 
πρέπει να καλείται συνεχόμενα 
όσο το παιχνίδι εκτελείται (while).

* Χωρίς τις γραμμές 16-18, 
ο χρήστης δεν θα μπορεί να κλείσει 
το παράθυρο που άνοιξε.
```

```py showNumbers
def main():
    font = pg.font.SysFont("comicsans", 60)
    run = True
    clock = pg.time.Clock()

    def redraw_window():
        WINDOW.fill((0, 20, 40))

        pg.display.update()

    while run:
        clock.tick(FPS)
        redraw_window()

        # check for any event
        for event in pg.event.get():
            if event.type == pg.QUIT:
                quit()

main()
```
</step>

</CodeSurferColumns>


---

<CodeSurfer>

```md
Με τις μέχρι τώρα εντολές, το αποτέλεσμα θα είναι απλά ένα κενό παράθυρο.
```

</CodeSurfer>

---

<CodeSurfer>

```md
Ο ασβός είναι ζώο θηλαστικό της οικογένειας των μουστελιδών, 
χαρακτηριστικό γνώρισμα των οποίων είναι η παρουσία μιας 
άσπρης λωρίδας τριχώματος 
κατά μήκος της ραχιαίας πλευράς του κεφαλιού 
και του λαιμού του. 

Σημαντικός αντιπρόσωπος είναι ο ευρασιατικός ασβός, 
η επιστημονική ονομασία του είναι Meles meles. 

Είναι αρκετά διαδεδομένο ζώο στις εύκρατες περιοχές 
της Ευρώπης και της Ασίας, 
όπου διαβιεί στις ορεινές δασώδεις περιοχές, 
κατά κανόνα σε ομάδες των έξι ατόμων.

Πηγή: https://el.wikipedia.org/wiki/Ασβός
```

</CodeSurfer>

---

<CodeSurfer>

```md 1,3[36:41],5[3:11],6[4:7],7[4:7],8[3:11],9[3:12],11[1:8]
Δημιουργώντας τον player

Ο player στον κώδικα μας είναι μια κλάση.
Αποτελείται από τις συναρτήσεις:
*  __init__ για το initialize
 * move για την κίνηση
 * draw για την εμφάνιση του παίκτη στο παράθυρο  
* get_width που επιστρέφει το μηκος του παίκτη 
* get_height που επιστρέφει το ύψος του παίκτη

Προσοχή! 
Αν κάνουμε move και στην συνέχεια δεν καλέσουμε την draw
το αποτέλεσμα στην οθόνη μας θα παραμείνει το ίδιο.
```

```py title="Δημιουργώντας την κλάση Player"
class Player:
    VELOCITY = 5

    def __init__(self):
        self.image = SPACESHIP_IMG
        self.x = int(WIDTH / 2)
        self.y = HEIGHT - self.image.get_width() * 2
        self.mask = pg.mask.from_surface(self.image)

    def draw(self, window):
        window.blit(self.image, (self.x, self.y))
  
    def move(self, direction):
        if direction == "left":
            self.x -= self.VELOCITY
        elif direction == "right":
            self.x += self.VELOCITY

    def get_width(self):
        return self.image.get_width()

    def get_height(self):
        return self.image.get_height()
```

```diff 3:8 subtitle="Συνάρτηση __init__ για το initialize"

```

```diff 10:11 subtitle="Συνάρτηση draw για την εμφάνιση του παίκτη στο παράθυρο"

```

```diff 10:11 subtitle="Στην συνάρτηση draw το μόνο που έχουμε να κάνουμε είναι να μεταφέρουμε την εικόνα του player στο παράθυρο που έχουμε δημιουργήσει"

```

```diff 13:17 subtitle="Συνάρτηση move για την κίνηση"

```

```diff 13:17 subtitle="Στην move λαμβάνοντας μια διεύθυνση (αριστερά ή δεξιά), αφαιρούμε ή θα προσθέτουμε αντίστοιχα την ταχύτητα στο x του player"

```

```diff 19:20 subtitle="Συνάρτηση get_width που επιστρέφει το μήκος του παίκτη"

```

```diff 22:23 subtitle="Συνάρτηση get_height που επιστρέφει το ύψος του παίκτη"

```


</CodeSurfer>



---


<CodeSurferColumns>

<step>

```md title="Player.__init__"
* Για εικόνα δίνουμε αυτή που κάναμε 
load στη μεταβλητή SPACESHIP_IMG (γραμμή 2).

* Ο player τοποθετείται κεντρικά 
στο κάτω μέρος της οθόνης (γραμμές 3-4).

* Επειδή δεν θέλουμε να κάνει collide
ο παίκτης ως όλη η τετράγωνη εικόνα,
αλλά μόνο εκεί που υπάρχουν 
ζωγραφισμένα pixels δημιουργούμε 
ένα mask (γραμμή 5).
```


```py showNumbers
def __init__(self):
        self.image = SPACESHIP_IMG
        self.x = int(WIDTH / 2)
        self.y = HEIGHT - self.image.get_width() * 2
        self.mask = pg.mask.from_surface(self.image)

```


</step>

</CodeSurferColumns>


---

<CodeSurfer>

```py title="Πώς χρησιμοποιώ την κλάση player;"
def main():
    font = pg.font.SysFont("comicsans", 60)
    run = True
    clock = pg.time.Clock()


    def redraw_window():
        WINDOW.fill((0, 20, 40))

        pg.display.update()
```

```py 6 title="Πώς χρησιμοποιώ την κλάση player;" subtitle="Το μόνο που μένει είναι να δημιουργήσουμε ένα player object στην main()"
def main():
    font = pg.font.SysFont("comicsans", 60)
    run = True
    clock = pg.time.Clock()

    player = Player()


    def redraw_window():
        WINDOW.fill((0, 20, 40))

        pg.display.update()
```

```py 12 title="Πώς χρησιμοποιώ την κλάση player;" subtitle="...και να το κάνουμε draw κάθε φορά που ενημερώνουμε το παράθυρο"
def main():
    font = pg.font.SysFont("comicsans", 60)
    run = True
    clock = pg.time.Clock()

    player = Player()


    def redraw_window():
        WINDOW.fill((0, 20, 40))

        player.draw(WINDOW)

        pg.display.update()
```

</CodeSurfer>


---

<CodeSurfer>

```py 9 title="Input: κίνηση του player" subtitle="Όσο το παιχνίδι τρέχει, με το key.get_pressed της pygame λαμβάνουμε το status για κάθε κουμπί στο πληκτρολόγιο"
while run:
        clock.tick(FPS)
        redraw_window()

        for event in pg.event.get():
            if event.type == pg.QUIT:
                quit()

        keys = pg.key.get_pressed()




```

```py 10 title="Input: κίνηση του player" subtitle="Eλέγχουμε αν έχει πατηθεί συγκεκριμένα το κουμπί a ΚΑΙ αν υπάρχει περιθώριο στην οθόνη για να μετακινήσουμε τον παίκτη αριστερά"
while run:
        clock.tick(FPS)
        redraw_window()

        for event in pg.event.get():
            if event.type == pg.QUIT:
                quit()

        keys = pg.key.get_pressed()
        if keys[pg.K_a] and player.x - player.VELOCITY > 0:



```


```py 11 title="Input: κίνηση του player" subtitle="Aν ισχύουν και τα δύο μετακινούμε τον παίκτη αριστερά"
while run:
        clock.tick(FPS)
        redraw_window()

        for event in pg.event.get():
            if event.type == pg.QUIT:
                quit()

        keys = pg.key.get_pressed()
        if keys[pg.K_a] and player.x - player.VELOCITY > 0:
            player.move("left")


```

```py 12:13 title="Input: κίνηση του player" subtitle="Ομοίως κάνουμε και για την κίνηση στα δεξιά"
while run:
        clock.tick(FPS)
        redraw_window()

        for event in pg.event.get():
            if event.type == pg.QUIT:
                quit()

        keys = pg.key.get_pressed()
        if keys[pg.K_a] and player.x - player.VELOCITY > 0:
            player.move("left")
        if keys[pg.K_d] and player.x + player.VELOCITY + player.get_width() < WIDTH:  
            player.move("right")    
```

</CodeSurfer>


---

<CodeSurfer>

```md title="Ας προσθέσουμε εχθρούς!"

Όπως και ο player η κλάση alien έχει τις 3 συναρτήσεις:

- init()
- draw()
- move()

```

```py title="Η κλάση Alien"
class Alien:
    def __init__(self, x, y):
        self.vel = 0.4

        self.x = x
        self.y = y
        self.image = ALIEN_IMG
        self.mask = pg.mask.from_surface(self.image)

    def draw(self, window):
        window.blit(self.image, (self.x, self.y))

    def move(self):
        self.y += self.vel
        self.vel += 0.0001
```

```diff 1:8 subtitle="Οταν κάνουμε initialize τον Alien χρειαζόμαστε ως παραμέτρους ένα x και ένα y τα οποία είναι η θέση του στο παράθυρο"

```

```diff 9:11 subtitle="Το draw παραμένει ίδιο με του player"

```

```diff 12:14 subtitle="Στο move αυξάνουμε το y"

```

```diff 12,15 subtitle="H τιμή της ταχύτητας (y) δεν είναι σταθερή αλλά αυξάνεται με κάθε του κίνηση. Έτσι το παιχνίδι μοιάζει πιο δύσκολο όσο περνάει ο χρόνος"

```


</CodeSurfer>

---


<CodeSurfer>


```py title="Ας προσθέσουμε τον Alien στην main()"

def main():
    font = pg.font.SysFont("comicsans", 60)
    run = True
    clock = pg.time.Clock()

    alien = Alien(WIDTH/2, 0)
    player = Player()

    def redraw_window():
        WINDOW.fill((0, 20, 40))

        player.draw(WINDOW)
    
        alien.draw(WINDOW)
        alien.move()

        pg.display.update()


```


```diff 7 subtitle="Όπως και με τον player δημιουργούμε αρχικά ένα alien"

```

```diff 7[18:28] subtitle="Προσοχή! Όταν δημιουργούμε ένα alien χρειάζεται να του δώσουμε ένα x και ένα y (τη θέση του στο παράθυρο)"

```


```diff 10,15,16 subtitle="...και στην συνέχεια το κάνουμε draw και move στην συνάρτηση redraw_window()"

```


</CodeSurfer>



---


<CodeSurfer>


```md 

Ας δυσκολέψουμε λίγο το παιχνίδι!

Αντί να έχουμε μόνο έναν εχθρό, ας προσθέσουμε σειρές εχθρών!
 
```


```py title="Εντός της main():"

ALIEN_ROW = 4
ALIEN_COL = 10

aliens = []

for i in range(ALIEN_ROW):
    cur_row = 20 + i * 50
    for j in range(1, ALIEN_COL + 1):
        new_alien = Alien(int(j * WIDTH / (ALIEN_COL + 1)), cur_row)
        aliens.append(new_alien)


```


```diff 2:3 subtitle="Αρχικά σε δύο σταθερές ορίζουμε το πλήθος των σειρών  και των στηλών με τους εχθρούς που θέλουμε"

```

```diff 5 subtitle="Στη συνέχεια αντικαθιστούμε την εντολή alien = Alien(WIDTH/2, 0) με μία άδεια λίστα aliens, την οποία φυσικά θα γεμίσουμε με Αlien objects"

```

```diff 7:11 subtitle="Σε δύο εμφωλευμένες επαναλήψεις δημιουργούμε ένα Αlien τη φορά και στην συνέχεια τον κάνουμε append στην λίστα μας"

```

```diff 10 subtitle="Προσοχή! Η μόνη διαφορά που έχει το κάθε alien είναι η μοναδική του θέση την οποία αντλούμε από το σημείο της επανάληψης που δημιουργήθηκε"

```


</CodeSurfer>

---

<CodeSurfer>


```py title="Εμφάνιση και κίνηση των Alien"




def redraw_window():
        WINDOW.fill((0, 20, 40))

        player.draw(WINDOW)
    
        for alien in aliens:
           alien.draw(WINDOW)
           alien.move()

        pg.display.update()

```


```diff 10:12 title="Εμφάνιση και κίνηση των Alien" subtitle="Στην redraw_window() κάνουμε draw και move για κάθε Αlien object στη λίστα aliens"

```

</CodeSurfer>


---


docs: [codesurfer.pomb.us](https://codesurfer.pomb.us)

Αυτή η παρουσίαση βασίστηκε στο [MDX Deck](https://github.com/jxnblk/mdx-deck) και το [Code Surfer](https://codesurfer.pomb.us)
